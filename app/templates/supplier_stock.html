{% extends "base.html" %}
{% block content %}
<body>
    <form action="{{ url_for('update_supplier_stock') }}" method="post" enctype="multipart/form-data">
        <label for="supplier_stock">Select supplier stock file:</label>
        <input type="file" name="file" accept=".xlsx, .xls" id="supplier_stock">
        <input type="submit" value="Upload new data">
    </form>
    <h4>Total supplier stock value: {{ total_value }} $ | Total supplier stock qty: {{ total_qty }} pcs</h4>
    <table>
        <thead>
            <tr>
                <th>No</th>
                <th>Stock date</th>
                <th>Material number</th>
                <th>Material description</th>
                <th>Manufacturer part</th>

                <th>Stock QTY</th>
                <th>Unit price [$]</th>
                <th>Total value [$]</th>

            </tr>
        </thead>
        <tbody>
                {% for stock in supplier_all_stock %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ stock[1].stock_date }}</td>
                    <td><a href="{{ url_for('component_view', id=stock[0].id) }}">{{ stock[0].material_number }}</td>
                    <td>{{ stock[0].material_description }}</td>
                    <td>{{ stock[0].manufacturer_part }}</td>
                    <td>{{ stock[1].supplier_stock_qty }}</td>
                    <td>{{ stock[0].unit_price }}</td>
                    <td>{{ (stock[0].unit_price * stock[1].supplier_stock_qty) | round(0) }}</td>
                </tr>
                {% endfor %}
        </tbody>
    </table>
</body>
{% endblock %}